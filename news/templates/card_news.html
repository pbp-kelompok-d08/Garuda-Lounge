{% load static %}

<article class="bg-white border border-brandred rounded-xl2 shadow-soft overflow-hidden transition-all duration-300 hover:shadow-md">
  <!-- Thumbnail -->
  <div class="relative overflow-hidden aspect-[16/9]">
    {% if news.thumbnail %}
      <img src="{{ news.thumbnail }}" alt="{{ news.title }}"
           class="w-full h-full object-cover transition-transform duration-300 hover:scale-105">
    {% else %}
      <div class="w-full h-full bg-cream"></div>
    {% endif %}

    <!-- Category badge -->
    <div class="absolute top-3 left-3">
      <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-semibold bg-brandred text-white border border-white shadow-[0_0_3px_rgba(170,21,21,0.6)]">
        {{ news.get_category_display }}
      </span>
    </div>

    <!-- Status badges -->
    <div class="absolute top-3 right-3 flex gap-2">
      {% if news.is_featured %}
        <span class="inline-flex items-center px-2 py-1 rounded text-xs font-semibold bg-white text-brandred border border-brandred">
          Featured
        </span>
      {% endif %}
      {% if news.is_hot %}
        <span class="inline-flex items-center px-2 py-1 rounded text-xs font-semibold bg-brandred text-white border border-white">
          Hot
        </span>
      {% endif %}
    </div>
  </div>

  <!-- Body -->
  <div class="p-5">
    <div class="flex items-center text-sm text-gray-500 mb-3">
      <time datetime="{{ news.created_at|date:'c' }}">{{ news.created_at|date:"d M Y" }}</time>
      <span class="mx-2">•</span>
      <span>{{ news.news_views }} views</span>
    </div>

    <h3 class="text-lg font-heading font-extrabold text-brandred mb-2 leading-tight">
      <a href="{% url 'news:show_news_detail' news.id %}" class="hover:text-brandred/80 transition-colors">
        {{ news.title }}
      </a>
    </h3>

    <p class="text-sm text-gray-800 line-clamp-3">
      {{ news.content|truncatewords:40 }}
    </p>

    <!-- Actions -->
    {% if user.is_authenticated and news.user_id == user.id %}
      <div class="flex items-center justify-between pt-4 border-t border-rose-100">
      <a href="{% url 'news:show_news_detail' news.id %}" class="font-semibold text-sm text-brandred hover:underline">
        Baca →
      </a>
      <div class="flex gap-2">
        <a href="{% url 'news:edit_news' news.id %}" class="text-sm text-gray-600 hover:text-brandred transition">Edit</a>

        <!-- Tombol delete langsung (AJAX) -->
        <button
          type="button"
          class="delete-news text-sm text-brandred hover:text-red-700 transition"
          data-url="{% url 'news:delete_news' news.id %}">
          Delete
        </button>
      </div>
    </div>
    
    {% else %}
      <div class="pt-4 border-t border-rose-100">
        <a href="{% url 'news:show_news_detail' news.id %}" class="font-semibold text-sm text-brandred hover:underline">
          Baca →
        </a>
      </div>
    {% endif %}
  </div>
</article>
